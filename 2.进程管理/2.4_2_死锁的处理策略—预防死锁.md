# 2.4_2_死锁的处理策略—预防死锁

## 1.知识总览

![image-20210610164859912](https://tuchuang-01.oss-cn-beijing.aliyuncs.com/img/image-20210610164859912.png)

- 本文主要介绍的是**静态策略**，也就是**预防死锁** 

## 2.破坏互斥条件

![image-20210610165905754](https://tuchuang-01.oss-cn-beijing.aliyuncs.com/img/image-20210610165905754.png)

- 可以通过一些技术破坏掉互斥条件，比如`SPOOLing技术`

- 缺点：
  - 不具有通用性
  - 很多地方为了系统安全性，必须保护这种互斥性

## 3.破坏不剥夺条件

![image-20210610170216220](https://tuchuang-01.oss-cn-beijing.aliyuncs.com/img/image-20210610170216220.png)

- 自己谦让🙂：当某个进程请求新的资源得不到满足时，它必须**立即释放保存的所有资源**，待以后需要时再重新申请
- 剥夺他人🤓：当某个进程需要的资源被其他进程所占有时，**可以通过操作系统协助，将想要的资源强行剥夺** 

- 缺点：
  1. 实现起来比较复杂
  2. 释放已经获得的资源可能造成前一个工作阶段的失效。一般只适用于**易保存**和**易恢复状态**的资源，如CPU
  3. 反复申请和释放资源会增加系统开销，降低系统吞吐量
  4. 如果采用**自己谦让方案**，可能会造成进程饥饿

## 4.破坏请求和保持条件

![image-20210610171005449](https://tuchuang-01.oss-cn-beijing.aliyuncs.com/img/image-20210610171005449.png)

- 可以采用**静态分配**的方法，即进程在运行前一次申请完它所需要的全部资源，在它的资源未满足前，不让它投入运行
- 优点：实现简单
- 缺点：
  - **资源利用率极低**
  - 可能会导致某些进程饥饿

## 5.破坏循环等待条件

![破坏循环等待条件](https://tuchuang-01.oss-cn-beijing.aliyuncs.com/img/image-20210610172428937.png)

- 顺序资源分配法
- 缺点：
  - 不方便增加新的设备
  - **进程实际使用的资源顺序可能和编号递增的顺序不一致**，从而导致资源的浪费
  - **必须按照规定的次序申请资源，用户的编程较为麻烦** 

## 6.总结

![总结](https://tuchuang-01.oss-cn-beijing.aliyuncs.com/img/image-20210610172506106.png)

- 各有利弊，综合考虑🧐